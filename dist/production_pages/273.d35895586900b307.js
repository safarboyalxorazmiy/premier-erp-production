"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[273],{7273:(q,f,a)=>{a.r(f),a.d(f,{PrintModule:()=>I});var u=a(9808),m=a(4054),c=a(5861),Z=a(4327),e=a(7587),x=a(715),g=a(845),T=a(4851),_=a(9783),l=a(2382),s=a(1424);function d(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Serial"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Model"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Time"),e.qZA()())}function h(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.serial),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.time)}}function v(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Soni"),e.qZA()())}function b(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function A(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Plan"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"GsCount"),e.qZA()())}function C(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.plan),e.xp6(2),e.Oqu(t.gscount)}}function M(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function P(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function U(n,o){if(1&n&&e.YNc(0,P,7,3,"ng-template",21),2&n){const i=o.rowIndex;e.Q6J("ngIf",o.$implicit.quantity&&i%2!=0)}}function E(n,o){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function O(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function N(n,o){if(1&n&&e.YNc(0,O,7,3,"ng-template",21),2&n){const i=o.rowIndex;e.Q6J("ngIf",o.$implicit.quantity&&i%2==0)}}const S=function(){return{margin:"0 auto",width:"fit-content",display:"block","margin-bottom":"20px"}},J=[{path:"",component:(()=>{class n{constructor(t,i,r){this.route=t,this.api=i,this.renderer=r,this.time=new Date,this.line=9,this.serial="",this.clicked=!1,this.added=!1,this.addedText="Kiritildi",this.someError=!1,this.errorText=""}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.id=t.route.snapshot.paramMap.get("model_id"),console.log(t),t.models=yield t.api.getModels();for(let r of t.models)r.id==t.id&&(t.selectedModel=r.name+" "+r.comment);let i={line:t.line};t.otherData=yield t.api.BackendRequest("","/production/plan/info"),t.lastProduct=yield t.api.getLast(i),t.count=yield t.api.getToday(i),t.byModel=yield t.api.getTodayByModels(i),t.rest=yield t.api.getSectorBalance(i)})()}requestSerial(){var t=this;return(0,c.Z)(function*(){let i={id:Number(t.id)},r=yield t.api.MetallSerial(i);console.log(r),"ok"!=r.result?(t.someError=!0,t.added=!1,t.errorText=`${r.error}`):(t.someError=!1,t.errorText="");let p={line:t.line};t.lastProduct=yield t.api.getLast(p),t.count=yield t.api.getToday(p),t.byModel=yield t.api.getTodayByModels(p),t.rest=yield t.api.getSectorBalance(p),t.clicked=!0,setTimeout(()=>{t.clicked=!1},1e3)})()}change(){this.serial.includes("clear")&&(this.serial=""),this.serial.includes("refresh")&&location.reload(),15===this.serial.length&&(this.sendSerial=this.serial,this.serial="",this.submit())}submit(){var t=this;return(0,c.Z)(function*(){let i={serial:t.sendSerial,line:t.line},r=yield t.api.serialInput(i);if(t.serial="",console.log("result: ",r),"ok"!=r.result)return t.someError=!0,t.added=!1,void(t.errorText=`${r.error}`);t.someError=!1,t.errorText="";let p={line:t.line};t.lastProduct=yield t.api.getLast(p),t.count=yield t.api.getToday(p),t.byModel=yield t.api.getTodayByModels(p),t.rest=yield t.api.getSectorBalance(p),t.added=!0,setTimeout(()=>{t.added=!1},3e3)})()}exportExcel(){var t=this;return(0,c.Z)(function*(){t.metalToday=yield t.api.getMetalTodaySerial(),a.e(574).then(a.bind(a,574)).then(i=>{const p={Sheets:{data:i.utils.json_to_sheet(t.metalToday)},SheetNames:["data"]},y=i.write(p,{bookType:"xlsx",type:"array"});t.saveAsExcelFile(y,"metal")})})()}saveAsExcelFile(t,i){let r=(new Date).getFullYear(),p=(new Date).getMonth(),y=(new Date).getDay(),k=(new Date).getHours(),Q=(new Date).getMinutes();const $=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});Z.saveAs($,i+`_export_${r}_${p}_${y}-${k}_${Q}.xlsx`)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.gz),e.Y36(x.g),e.Y36(e.Qsj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-print"]],decls:49,vars:21,consts:[[1,"card",2,"padding-left","70px","margin-right","70px","padding-top","10px"],[1,"row","flex",2,"gap","20px","align-items","center"],["type","button","pButton","","icon","pi pi-print",1,"p-button-primary","px-6",3,"disabled","click"],["href","/metall",2,"font-size","24px","margin-left","150px"],[2,"margin-left","20px","color","red","text-align","center",3,"hidden"],[2,"margin-left","20px","color","green","text-align","center",3,"hidden"],[1,"d-flex","text-center"],[2,"padding-left","10px"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],[1,"flex","flex-wrap","absolute","top-0","right-0","align-items-center","justify-content-right"],[2,"padding-right","100px"],[1,"card"],[1,"grid"],[1,"col"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","p-datatable-sm",3,"value"],[1,"row",2,"display","flex","flex-direction","row","gap","20px"],["type","text","id","serial","placeholder","Serial Nomer qayta chiqarish","autofocus","","pInputText","",2,"width","50%",3,"ngModel","keyup","ngModelChange"],["label","Tasdiqlash",2,"align-items","center",3,"click"],[3,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1"),e._uU(3),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.requestSerial(),i.clicked=!0}),e._uU(5," Print. "),e.qZA(),e.TgZ(6,"a",3),e._uU(7,"Boshqa modelga o'tish"),e.qZA()(),e.TgZ(8,"div")(9,"p",4),e._uU(10),e.qZA(),e.TgZ(11,"h1",5),e._uU(12),e.qZA()(),e.TgZ(13,"div",6)(14,"h2",7),e._uU(15),e.TgZ(16,"button",8),e.NdJ("click",function(){return i.exportExcel()}),e.qZA()()(),e.TgZ(17,"div",9)(18,"h1",10),e._uU(19),e.ALo(20,"date"),e.qZA()(),e.TgZ(21,"div",11)(22,"div",12)(23,"div",13)(24,"p-table",14),e.YNc(25,d,7,0,"ng-template",15),e.YNc(26,h,7,3,"ng-template",16),e.qZA()(),e.TgZ(27,"div",13)(28,"p-table",14),e.YNc(29,v,5,0,"ng-template",15),e.YNc(30,b,5,2,"ng-template",16),e.qZA()()()(),e.TgZ(31,"p-table",14),e.YNc(32,A,7,0,"ng-template",15),e.YNc(33,C,7,3,"ng-template",16),e.qZA(),e.TgZ(34,"h2"),e._uU(35,"Mavjud detallar ro'yhati "),e.qZA(),e.TgZ(36,"div",11)(37,"div",12)(38,"div",13)(39,"p-table",17),e.YNc(40,M,7,0,"ng-template",15),e.YNc(41,U,1,1,"ng-template",16),e.qZA()(),e.TgZ(42,"div",13)(43,"p-table",17),e.YNc(44,E,7,0,"ng-template",15),e.YNc(45,N,1,1,"ng-template",16),e.qZA()()()(),e.TgZ(46,"div",18)(47,"input",19),e.NdJ("keyup",function(){return i.change()})("ngModelChange",function(p){return i.serial=p}),e.qZA(),e.TgZ(48,"p-button",20),e.NdJ("click",function(){return i.submit()}),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(i.selectedModel),e.xp6(1),e.Q6J("disabled",i.clicked),e.xp6(5),e.Q6J("hidden",!i.someError),e.xp6(1),e.Oqu(i.errorText),e.xp6(1),e.Q6J("hidden",!i.added),e.xp6(1),e.Oqu(i.addedText),e.xp6(3),e.AsE("Bugun ishlab chiqarilgan maxsulot soni: ",null==i.count?null:i.count.smena1,"/",null==i.count?null:i.count.smena2," "),e.xp6(4),e.Oqu(e.xi3(20,17,i.time,"HH:mm:ss")),e.xp6(5),e.Q6J("value",i.lastProduct),e.xp6(4),e.Q6J("value",i.byModel),e.xp6(3),e.Q6J("value",i.otherData),e.xp6(8),e.Q6J("value",i.rest),e.xp6(4),e.Q6J("value",i.rest),e.xp6(4),e.Q6J("ngModel",i.serial),e.xp6(1),e.Akn(e.DdM(20,S)))},directives:[g.Hq,T.iA,_.jx,u.O5,l.Fj,s.o,l.JJ,l.On,g.zx],pipes:[u.uU],styles:[""]}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(J)],m.Bz]}),n})();var D=a(4534);let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,B,g.hJ,l.u5,D.V,T.U$,g.hJ,s.j]]}),n})()},4534:(q,f,a)=>{a.d(f,{V:()=>_});var u=a(7587),m=a(9808);let _=(()=>{class l{}return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=u.oAB({type:l}),l.\u0275inj=u.cJS({imports:[[m.ez]]}),l})()}}]);