"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[882],{3882:(C,g,l)=>{l.r(g),l.d(g,{PpuModule:()=>O});var d=l(9808),f=l(4054),c=l(5861),v=l(4327),e=l(7587),x=l(715),m=l(2382),h=l(1424),T=l(845),i=l(4851),p=l(9783);function r(n,a){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Serial"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Model"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Time"),e.qZA()())}function y(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.serial),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.time)}}function Z(n,a){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Soni"),e.qZA()())}function b(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function A(n,a){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function P(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function M(n,a){if(1&n&&e.YNc(0,P,7,3,"ng-template",17),2&n){const o=a.rowIndex;e.Q6J("ngIf",a.$implicit.quantity&&o%1==0)}}const E=[{path:"",component:(()=>{class n{constructor(t,o){this.api=t,this.renderer=o,this.time=new Date,this.line=10,this.serial="",this.added=!1,this.addedText="Kiritildi",this.someError=!1,this.errorText=""}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.intervalId=setInterval(()=>{t.time=new Date},1e3);let o={line:t.line};t.lastProduct=yield t.api.getLast(o),console.log(t.lastProduct),t.count=yield t.api.getToday(o),console.log(t.count),t.byModel=yield t.api.getTodayByModels(o),console.log("bymodel: ",t.byModel),t.rest=yield t.api.getSectorBalance(o)})()}submit(){var t=this;return(0,c.Z)(function*(){let o={serial:t.sendSerial,line:t.line},u=yield t.api.serialInput(o);if(t.serial="",console.log("result: ",u),"ok"!=u.result)return t.someError=!0,t.added=!1,void(t.errorText=`${u.error}`);t.someError=!1,t.errorText="";let s={line:t.line};t.lastProduct=yield t.api.getLast(s),t.count=yield t.api.getToday(s),t.byModel=yield t.api.getTodayByModels(s),t.rest=yield t.api.getSectorBalance(s),t.renderer.selectRootElement("#serial").focus(),t.added=!0,setTimeout(()=>{t.added=!1},3e3)})()}change(){this.serial.includes("clear")&&(this.serial=""),this.serial.includes("refresh")&&location.reload(),15===this.serial.length&&(this.sendSerial=this.serial,this.serial="",this.submit())}exportExcel(){var t=this;return(0,c.Z)(function*(){t.ppuToday=yield t.api.getPpuTodaySerial(),l.e(574).then(l.bind(l,574)).then(o=>{const s={Sheets:{data:o.utils.json_to_sheet(t.ppuToday)},SheetNames:["data"]},_=o.write(s,{bookType:"xlsx",type:"array"});t.saveAsExcelFile(_,"ppu")})})()}saveAsExcelFile(t,o){let u=(new Date).getFullYear(),s=(new Date).getMonth(),_=(new Date).getDay(),S=(new Date).getHours(),I=(new Date).getMinutes();const B=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});v.saveAs(B,o+`_export_${u}_${s}_${_}-${S}_${I}.xlsx`)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.g),e.Y36(e.Qsj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ppu"]],decls:34,vars:14,consts:[[1,"card",2,"padding-left","70px","margin-right","70px"],[1,"flex","flex-wrap","align-items-center","justify-content-left","card-container","blue-container"],[1,"left-0"],["type","text","id","serial","placeholder","Serial Nomer","autofocus","","pInputText","",2,"margin-left","20px",3,"ngModel","keyup","ngModelChange"],[2,"margin-left","20px","color","red",3,"hidden"],[2,"margin-left","20px","color","green",3,"hidden"],[2,"padding-left","10px"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","ml-2",3,"click"],[1,"flex","flex-wrap","absolute","top-0","right-0","align-items-center","justify-content-right"],[2,"padding-right","100px"],[1,"card"],[1,"grid"],[1,"col"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","p-datatable-sm",3,"value"],[3,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"PPU liniyasi"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("keyup",function(){return o.change()})("ngModelChange",function(s){return o.serial=s}),e.qZA(),e.TgZ(5,"p",4),e._uU(6),e.qZA(),e.TgZ(7,"h1",5),e._uU(8),e.qZA(),e.TgZ(9,"h2",6),e._uU(10),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return o.exportExcel()}),e.qZA()(),e.TgZ(12,"div",8)(13,"h1",9),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"p-table",13),e.YNc(20,r,7,0,"ng-template",14),e.YNc(21,y,7,3,"ng-template",15),e.qZA()(),e.TgZ(22,"div",12)(23,"p-table",13),e.YNc(24,Z,5,0,"ng-template",14),e.YNc(25,b,5,2,"ng-template",15),e.qZA()()()(),e.TgZ(26,"h2"),e._uU(27,"Mavjud detallar ro'yhati"),e.qZA(),e.TgZ(28,"div",10)(29,"div",11)(30,"div",12)(31,"p-table",16),e.YNc(32,A,7,0,"ng-template",14),e.YNc(33,M,1,1,"ng-template",15),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",o.serial),e.xp6(1),e.Q6J("hidden",!o.someError),e.xp6(1),e.Oqu(o.errorText),e.xp6(1),e.Q6J("hidden",!o.added),e.xp6(1),e.Oqu(o.addedText),e.xp6(2),e.AsE("Bugun ishlab chiqarilgan maxsulot soni: ",null==o.count?null:o.count.smena1,"/",null==o.count?null:o.count.smena2,""),e.xp6(4),e.Oqu(e.xi3(15,11,o.time,"HH:mm:ss")),e.xp6(5),e.Q6J("value",o.lastProduct),e.xp6(4),e.Q6J("value",o.byModel),e.xp6(8),e.Q6J("value",o.rest))},directives:[m.Fj,h.o,m.JJ,m.On,T.Hq,i.iA,p.jx,d.O5],pipes:[d.uU],styles:[""]}),n})()}];let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(E)],f.Bz]}),n})();var q=l(4534);let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[d.ez,U,m.u5,q.V,i.U$,h.j,T.hJ]]}),n})()},4534:(C,g,l)=>{l.d(g,{V:()=>T});var d=l(7587),f=l(9808);let T=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=d.oAB({type:i}),i.\u0275inj=d.cJS({imports:[[f.ez]]}),i})()}}]);