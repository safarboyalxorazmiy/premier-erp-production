"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[356],{5356:(S,g,i)=>{i.r(g),i.d(g,{SborkaModule:()=>N});var d=i(9808),f=i(4054),c=i(5861),b=i(4327),e=i(7587),x=i(715),m=i(2382),h=i(1424),T=i(845),a=i(4851),s=i(9783);function r(o,l){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Serial"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Model"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Time"),e.qZA()())}function _(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const t=l.$implicit;e.xp6(2),e.Oqu(t.serial),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.time)}}function v(o,l){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Soni"),e.qZA()())}function Z(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&o){const t=l.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function A(o,l){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function C(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function M(o,l){if(1&o&&e.YNc(0,C,7,3,"ng-template",17),2&o){const n=l.rowIndex;e.Q6J("ngIf",l.$implicit.quantity&&n%2!=0)}}function q(o,l){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function k(o,l){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function U(o,l){if(1&o&&e.YNc(0,k,7,3,"ng-template",17),2&o){const n=l.rowIndex;e.Q6J("ngIf",l.$implicit.quantity&&n%2==0)}}const E=[{path:"",component:(()=>{class o{constructor(t,n){this.api=t,this.renderer=n,this.time=new Date,this.line=2,this.serial="",this.added=!1,this.addedText="Kiritildi",this.someError=!1,this.errorText=""}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.intervalId=setInterval(()=>{t.time=new Date},1e3);let n={line:t.line};t.lastProduct=yield t.api.getLast(n),console.log(t.lastProduct),t.count=yield t.api.getToday(n),console.log(t.count),t.byModel=yield t.api.getTodayByModels(n),console.log("bymodel: ",t.byModel),t.rest=yield t.api.getSectorBalance(n),console.log(t.rest),console.log("count: ",t.count),console.log("byModel: ",t.byModel)})()}submit(){var t=this;return(0,c.Z)(function*(){let n={serial:t.sendSerial,line:t.line},u=yield t.api.serialInput(n);if(t.serial="",console.log("result: ",u),"ok"!=u.result)return t.someError=!0,t.added=!1,void(t.errorText=`${u.error}`);t.someError=!1,t.errorText="";let p={line:t.line};t.lastProduct=yield t.api.getLast(p),t.count=yield t.api.getToday(p),t.byModel=yield t.api.getTodayByModels(p),t.rest=yield t.api.getSectorBalance(p),t.renderer.selectRootElement("#serial").focus(),t.added=!0,setTimeout(()=>{t.added=!1},3e3)})()}change(){this.serial.includes("clear")&&(this.serial=""),this.serial.includes("refresh")&&location.reload(),15===this.serial.length&&(this.sendSerial=this.serial,this.serial="",this.submit())}exportExcel(){var t=this;return(0,c.Z)(function*(){t.sborkaToday=yield t.api.getSborkaTodaySerial(),i.e(574).then(i.bind(i,574)).then(n=>{const p={Sheets:{data:n.utils.json_to_sheet(t.sborkaToday)},SheetNames:["data"]},y=n.write(p,{bookType:"xlsx",type:"array"});t.saveAsExcelFile(y,"sborka")})})()}saveAsExcelFile(t,n){let u=(new Date).getFullYear(),p=(new Date).getMonth(),y=(new Date).getDay(),D=(new Date).getHours(),J=(new Date).getMinutes();const j=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});b.saveAs(j,n+`_export_${u}_${p}_${y}-${D}_${J}.xlsx`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.g),e.Y36(e.Qsj))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sborka"]],decls:38,vars:15,consts:[[1,"card",2,"padding-left","70px","margin-right","70px"],[1,"flex","flex-wrap","align-items-center","justify-content-left","card-container","blue-container"],[1,"left-0"],["type","text","id","serial","placeholder","Serial Nomer","autofocus","","pInputText","",2,"margin-left","20px",3,"ngModel","keyup","ngModelChange"],[2,"margin-left","20px","color","red",3,"hidden"],[2,"margin-left","20px","color","green",3,"hidden"],[2,"padding-left","10px"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","ml-2",3,"click"],[1,"flex","flex-wrap","absolute","top-0","right-0","align-items-center","justify-content-right"],[2,"padding-right","100px"],[1,"card"],[1,"grid"],[1,"col"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","p-datatable-sm",3,"value"],[3,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Yig'ish liniyasi"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("keyup",function(){return n.change()})("ngModelChange",function(p){return n.serial=p}),e.qZA(),e.TgZ(5,"p",4),e._uU(6),e.qZA(),e.TgZ(7,"h1",5),e._uU(8),e.qZA(),e.TgZ(9,"h2",6),e._uU(10),e.TgZ(11,"button",7),e.NdJ("click",function(){return n.exportExcel()}),e.qZA()()(),e.TgZ(12,"div",8)(13,"h1",9),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"p-table",13),e.YNc(20,r,7,0,"ng-template",14),e.YNc(21,_,7,3,"ng-template",15),e.qZA()(),e.TgZ(22,"div",12)(23,"p-table",13),e.YNc(24,v,5,0,"ng-template",14),e.YNc(25,Z,5,2,"ng-template",15),e.qZA()()()(),e.TgZ(26,"h2"),e._uU(27,"Mavjud detallar ro'yhati "),e.qZA(),e.TgZ(28,"div",10)(29,"div",11)(30,"div",12)(31,"p-table",16),e.YNc(32,A,7,0,"ng-template",14),e.YNc(33,M,1,1,"ng-template",15),e.qZA()(),e.TgZ(34,"div",12)(35,"p-table",16),e.YNc(36,q,7,0,"ng-template",14),e.YNc(37,U,1,1,"ng-template",15),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.serial),e.xp6(1),e.Q6J("hidden",!n.someError),e.xp6(1),e.Oqu(n.errorText),e.xp6(1),e.Q6J("hidden",!n.added),e.xp6(1),e.Oqu(n.addedText),e.xp6(2),e.AsE("Bugun ishlab chiqarilgan maxsulot soni: ",null==n.count?null:n.count.smena1,"/",null==n.count?null:n.count.smena2," "),e.xp6(4),e.Oqu(e.xi3(15,12,n.time,"HH:mm:ss")),e.xp6(5),e.Q6J("value",n.lastProduct),e.xp6(4),e.Q6J("value",n.byModel),e.xp6(8),e.Q6J("value",n.rest),e.xp6(4),e.Q6J("value",n.rest))},directives:[m.Fj,h.o,m.JJ,m.On,T.Hq,a.iA,s.jx,d.O5],pipes:[d.uU],styles:[""]}),o})()}];let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(E)],f.Bz]}),o})();var I=i(4534);let N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,O,h.j,m.u5,I.V,a.U$,T.hJ]]}),o})()},4534:(S,g,i)=>{i.d(g,{V:()=>T});var d=i(7587),f=i(9808);let T=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=d.oAB({type:a}),a.\u0275inj=d.cJS({imports:[[f.ez]]}),a})()}}]);