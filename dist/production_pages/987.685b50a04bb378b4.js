"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[987],{9987:(b,m,a)=>{a.r(m),a.d(m,{AgregatModule:()=>D});var u=a(9808),f=a(4054),d=a(5861),A=a(4327),e=a(7587),x=a(715),c=a(2382),h=a(1424),T=a(845),i=a(4851),s=a(9783);function r(n,l){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Serial"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Model"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Time"),e.qZA()())}function _(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.serial),e.xp6(2),e.Oqu(t.model),e.xp6(2),e.Oqu(t.time)}}function v(n,l){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Soni"),e.qZA()())}function Z(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&n){const t=l.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function C(n,l){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function q(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function M(n,l){if(1&n&&e.YNc(0,q,7,3,"ng-template",17),2&n){const o=l.rowIndex;e.Q6J("ngIf",l.$implicit.quantity&&o%2!=0)}}function U(n,l){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function E(n,l){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function O(n,l){if(1&n&&e.YNc(0,E,7,3,"ng-template",17),2&n){const o=l.rowIndex;e.Q6J("ngIf",l.$implicit.quantity&&o%2==0)}}const S=[{path:"",component:(()=>{class n{constructor(t,o){this.api=t,this.renderer=o,this.time=new Date,this.line=19,this.serial="",this.added=!1,this.addedText="Kiritildi",this.someError=!1,this.errorText=""}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.intervalId=setInterval(()=>{t.time=new Date},1e3);let o={line:t.line};t.lastProduct=yield t.api.getLast(o),console.log(t.lastProduct),t.count=yield t.api.getToday(o),console.log(t.count),t.byModel=yield t.api.getTodayByModels(o),console.log("bymodel: ",t.byModel),t.rest=yield t.api.getSectorBalance(o),console.log(t.rest)})()}submit(){var t=this;return(0,d.Z)(function*(){let o={serial:t.sendSerial,line:t.line},g=yield t.api.serialInput(o);if(t.serial="",console.log("result: ",g),"ok"!=g.result)return t.someError=!0,void(t.errorText=`${g.error}`);t.someError=!1,t.added=!0,t.errorText="";let p={line:t.line};t.lastProduct=yield t.api.getLast(p),t.count=yield t.api.getToday(p),t.byModel=yield t.api.getTodayByModels(p),t.rest=yield t.api.getSectorBalance(p),t.renderer.selectRootElement("#serial").focus(),t.added=!0,setTimeout(()=>{t.added=!1},3e3)})()}change(){this.serial.includes("clear")&&(this.serial=""),this.serial.includes("refresh")&&location.reload(),15===this.serial.length&&(this.sendSerial=this.serial,this.serial="",this.submit())}exportExcel(){var t=this;return(0,d.Z)(function*(){t.agregatToday=yield t.api.getAgregatTodaySerial(),a.e(574).then(a.bind(a,574)).then(o=>{const p={Sheets:{data:o.utils.json_to_sheet(t.agregatToday)},SheetNames:["data"]},y=o.write(p,{bookType:"xlsx",type:"array"});t.saveAsExcelFile(y,"agregat")})})()}saveAsExcelFile(t,o){let g=(new Date).getFullYear(),p=(new Date).getMonth(),y=(new Date).getDay(),J=(new Date).getHours(),B=(new Date).getMinutes();const Y=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});A.saveAs(Y,o+`_export_${g}_${p}_${y}-${J}_${B}.xlsx`)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.g),e.Y36(e.Qsj))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-agregat"]],decls:38,vars:15,consts:[[1,"card",2,"padding-left","70px","margin-right","70px"],[1,"flex","flex-wrap","align-items-center","justify-content-left","card-container","blue-container"],[1,"left-0"],["type","text","id","serial","placeholder","Serial Nomer","autofocus","","pInputText","",2,"margin-left","20px",3,"ngModel","keyup","ngModelChange"],[2,"margin-left","20px","color","red",3,"hidden"],[2,"margin-left","20px","color","green",3,"hidden"],[2,"padding-left","10px"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","ml-2",3,"click"],[1,"flex","flex-wrap","absolute","top-0","right-0","align-items-center","justify-content-right"],[2,"padding-right","100px"],[1,"card"],[1,"grid"],[1,"col"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["styleClass","p-datatable-sm",3,"value"],[3,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Agregat liniyasi"),e.qZA(),e.TgZ(4,"input",3),e.NdJ("keyup",function(){return o.change()})("ngModelChange",function(p){return o.serial=p}),e.qZA(),e.TgZ(5,"p",4),e._uU(6),e.qZA(),e.TgZ(7,"h1",5),e._uU(8),e.qZA(),e.TgZ(9,"h2",6),e._uU(10),e.TgZ(11,"button",7),e.NdJ("click",function(){return o.exportExcel()}),e.qZA()()(),e.TgZ(12,"div",8)(13,"h1",9),e._uU(14),e.ALo(15,"date"),e.qZA()(),e.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"p-table",13),e.YNc(20,r,7,0,"ng-template",14),e.YNc(21,_,7,3,"ng-template",15),e.qZA()(),e.TgZ(22,"div",12)(23,"p-table",13),e.YNc(24,v,5,0,"ng-template",14),e.YNc(25,Z,5,2,"ng-template",15),e.qZA()()()(),e.TgZ(26,"h2"),e._uU(27,"Mavjud detallar ro'yhati "),e.qZA(),e.TgZ(28,"div",10)(29,"div",11)(30,"div",12)(31,"p-table",16),e.YNc(32,C,7,0,"ng-template",14),e.YNc(33,M,1,1,"ng-template",15),e.qZA()(),e.TgZ(34,"div",12)(35,"p-table",16),e.YNc(36,U,7,0,"ng-template",14),e.YNc(37,O,1,1,"ng-template",15),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",o.serial),e.xp6(1),e.Q6J("hidden",!o.someError),e.xp6(1),e.Oqu(o.errorText),e.xp6(1),e.Q6J("hidden",!o.added),e.xp6(1),e.Oqu(o.addedText),e.xp6(2),e.AsE("Bugun ishlab chiqarilgan maxsulot soni: ",null==o.count?null:o.count.smena1,"/",null==o.count?null:o.count.smena2," "),e.xp6(4),e.Oqu(e.xi3(15,12,o.time,"HH:mm:ss")),e.xp6(5),e.Q6J("value",o.lastProduct),e.xp6(4),e.Q6J("value",o.byModel),e.xp6(8),e.Q6J("value",o.rest),e.xp6(4),e.Q6J("value",o.rest))},directives:[c.Fj,h.o,c.JJ,c.On,T.Hq,i.iA,s.jx,u.O5],pipes:[u.uU],styles:[""]}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(S)],f.Bz]}),n})();var N=a(4534);let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,I,c.u5,N.V,i.U$,h.j,T.hJ]]}),n})()},4534:(b,m,a)=>{a.d(m,{V:()=>T});var u=a(7587),f=a(9808);let T=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[f.ez]]}),i})()}}]);