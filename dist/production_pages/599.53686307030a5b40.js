"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[599],{2599:(S,u,i)=>{i.r(u),i.d(u,{AdminModule:()=>Q});var v=i(9808),g=i(4054),c=i(5861),d=i(9783),e=i(7587),y=i(715),f=i(7773),a=i(4851),_=i(159),m=i(2382),h=i(1424),A=i(845),T=i(9114);function C(n,l){1&n&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Line"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e._UZ(5,"th",10),e.qZA())}const Z=function(){return{width:"100%"}};function x(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"p-dropdown",16),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).lines=r}),e.qZA()}if(2&n){const t=e.oxw(2);e.Akn(e.DdM(4,Z)),e.Q6J("options",t.lines)("ngModel",t.lines)}}function M(n,l){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.name," ")}}function N(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"input",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().$implicit.name=r}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("ngModel",t.name)}}function J(n,l){if(1&n&&e._uU(0),2&n){const t=e.oxw().$implicit;e.hij(" ",t.defect_name," ")}}function D(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr",11)(1,"td")(2,"p-cellEditor"),e.YNc(3,x,1,5,"ng-template",12),e.YNc(4,M,1,1,"ng-template",13),e.qZA()(),e.TgZ(5,"td")(6,"p-cellEditor"),e.YNc(7,N,1,1,"ng-template",12),e.YNc(8,J,1,1,"ng-template",13),e.qZA()(),e.TgZ(9,"td",14)(10,"button",15),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().deleteDefect(p)}),e.qZA()()()}2&n&&e.Q6J("pEditableRow",l.$implicit)}const E=function(){return{width:"450px"}},U=[{path:"",component:(()=>{class n{constructor(t,o,r){this.api=t,this.messageService=o,this.confirmationService=r,this.someError=!1,this.defName=""}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.remontTypesAll=yield t.api.getDefectsTypes(),t.lines=yield t.api.getLines()})()}deleteDefect(t){var r,o=this;this.confirmationService.confirm({message:"Are you sure you want to delete "+t.name+": "+t.defect_name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:(r=(0,c.Z)(function*(){let p={id:t.id},s=yield o.api.deleteDefectsTypes(p);if(console.log("result: ",s),"ok"!=s.result)return o.someError=!0,void(o.errorText=s.error);o.someError=!1,o.messageService.add({severity:"success",summary:"Success",detail:"Defekt o'chirildi"}),o.remontTypesAll=yield o.api.getDefectsTypes()}),function(){return r.apply(this,arguments)})})}defKiritish(){var t=this;return(0,c.Z)(function*(){if(console.log("def name: ",t.defName),""==t.defName)return t.someError=!0,void(t.errorText="Defekt nomi kiritilmadi");t.someError=!1;let o={line:t.selectedLine.id,name:t.defName},r=yield t.api.addDefectsTypes(o);"ok"==r.result?t.messageService.add({severity:"success",summary:"Success",detail:"Defekt turi kiritildi"}):(t.someError=!0,t.errorText=r.error),t.remontTypesAll=yield t.api.getDefectsTypes(),t.defName=""})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.g),e.Y36(d.ez),e.Y36(d.YP))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin"]],features:[e._Bn([d.ez,d.YP])],decls:23,vars:11,consts:[[1,"card"],[2,"margin-left","20px","color","red",3,"hidden"],["dataKey","id","editMode","row","responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-stretch","flex-wrap","card-container"],[1,"flex","align-items-center","justify-content-center","font-bold","text-white","border-round","m-2"],["optionLabel","name",3,"options","ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Defekt nomi",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],["pButton","","pRipple","","type","button","label","Kiritish",1,"p-button-rounded",3,"click"],[2,"width","8rem"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],[2,"text-align","center"],["pButton","","pRipple","","type","button","icon","pi pi-trash",1,"p-button-rounded","p-button-text",3,"click"],[3,"options","ngModel","ngModelChange"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"]],template:function(t,o){1&t&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0)(2,"h2"),e._uU(3,"Defekt turlari"),e.qZA(),e.TgZ(4,"p",1),e._uU(5),e.qZA(),e.TgZ(6,"p-table",2),e.YNc(7,C,6,0,"ng-template",3),e.YNc(8,D,11,1,"ng-template",4),e.qZA()(),e.TgZ(9,"div")(10,"h2"),e._uU(11,"Defekt kiritish"),e.qZA(),e.TgZ(12,"p",1),e._uU(13),e.qZA(),e.TgZ(14,"div",0)(15,"div",5)(16,"div",6)(17,"p-dropdown",7),e.NdJ("ngModelChange",function(p){return o.selectedLine=p}),e.qZA()(),e.TgZ(18,"div",6)(19,"input",8),e.NdJ("ngModelChange",function(p){return o.defName=p}),e.qZA()(),e.TgZ(20,"div",6)(21,"button",9),e.NdJ("click",function(){return o.defKiritish()}),e.qZA()()()()(),e._UZ(22,"p-confirmDialog")),2&t&&(e.xp6(4),e.Q6J("hidden",!o.someError),e.xp6(1),e.Oqu(o.errorText),e.xp6(1),e.Q6J("value",o.remontTypesAll),e.xp6(6),e.Q6J("hidden",!o.someError),e.xp6(1),e.Oqu(o.errorText),e.xp6(4),e.Q6J("options",o.lines)("ngModel",o.selectedLine),e.xp6(2),e.Q6J("ngModel",o.defName),e.xp6(3),e.Akn(e.DdM(10,E)))},directives:[f.FN,a.iA,d.jx,a.D$,a.YL,_.Lt,m.JJ,m.On,m.Fj,h.o,m.Q7,A.Hq,T.Q],styles:[""]}),n})()}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[g.Bz.forChild(U)],g.Bz]}),n})();var w=i(5315);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[v.ez,Y,m.u5,a.U$,f.EV,_.kW,A.hJ,w.S,h.j,T.D]]}),n})()}}]);