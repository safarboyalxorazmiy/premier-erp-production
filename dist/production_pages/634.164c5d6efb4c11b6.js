"use strict";(self.webpackChunkproduction_pages=self.webpackChunkproduction_pages||[]).push([[634],{9634:(ee,g,l)=>{l.r(g),l.d(g,{PackingModule:()=>V});var d=l(9808),m=l(4054),u=l(5861),C=l(4327),e=l(7587),v=l(715),c=l(2382),h=l(1424),f=l(845);const Z=["rb"],b=function(i,o,t){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":o,"p-radiobutton-label-focus":t}};function A(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"label",4),e.NdJ("click",function(a){return e.CHM(t),e.oxw().select(a)}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(),n=e.MAs(3);e.Tol(t.labelStyleClass),e.Q6J("ngClass",e.kEZ(5,b,n.checked,t.disabled,t.focused)),e.uIk("for",t.inputId),e.xp6(1),e.Oqu(t.label)}}const M=function(i,o,t){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":o,"p-radiobutton-focused":t}},x=function(i,o,t){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":o,"p-focus":t}},P={provide:c.JU,useExisting:(0,e.Gpc)(()=>_),multi:!0};let E=(()=>{class i{constructor(){this.accessors=[]}add(t,n){this.accessors.push([t,n])}remove(t){this.accessors=this.accessors.filter(n=>n[1]!==t)}select(t){this.accessors.forEach(n=>{this.isSameGroup(n,t)&&n[1]!==t&&n[1].writeValue(t.value)})}isSameGroup(t,n){return!!t[0].control&&t[0].control.root===n.control.control.root&&t[1].name===n.name}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_=(()=>{class i{constructor(t,n,a){this.cd=t,this.injector=n,this.registry=a,this.onClick=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(c.a5),this.checkName(),this.registry.add(this.control,this)}handleClick(t,n,a){t.preventDefault(),!this.disabled&&(this.select(t),a&&n.focus())}select(t){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(t))}writeValue(t){this.checked=t==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1,this.onModelTouched(),this.onBlur.emit(t)}onChange(t){this.select(t)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(e.zs3),e.Y36(E))},i.\u0275cmp=e.Xpm({type:i,selectors:[["p-radioButton"]],viewQuery:function(t,n){if(1&t&&e.Gf(Z,5),2&t){let a;e.iGM(a=e.CRH())&&(n.inputViewChild=a.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[e._Bn([P])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),e.NdJ("change",function(s){return n.onChange(s)})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),e.qZA()(),e.TgZ(4,"div",4),e.NdJ("click",function(s){e.CHM(a);const p=e.MAs(3);return n.handleClick(s,p,!0)}),e._UZ(5,"span",5),e.qZA()(),e.YNc(6,A,2,9,"label",6)}2&t&&(e.Tol(n.styleClass),e.Q6J("ngStyle",n.style)("ngClass",e.kEZ(15,M,n.checked,n.disabled,n.focused)),e.xp6(2),e.Q6J("checked",n.checked)("disabled",n.disabled),e.uIk("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),e.xp6(2),e.Q6J("ngClass",e.kEZ(19,x,n.checked,n.disabled,n.focused)),e.xp6(2),e.Q6J("ngIf",n.label))},directives:[d.PC,d.mk,d.O5],encapsulation:2,changeDetection:0}),i})(),q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez]]}),i})();var y=l(242),k=l(4851),I=l(9783),T=l(8850);const B=["doorInput"],w=["packingInput"],N=["serialInput"];function S(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",29)(1,"p-radioButton",30),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().selectedPrinter=a}),e.qZA(),e.TgZ(2,"label",31),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("inputId",t.id)("value",t)("ngModel",n.selectedPrinter),e.xp6(1),e.Q6J("for",t.id),e.xp6(1),e.Oqu(t.name)}}function J(i,o){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Serial"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Packing"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Time"),e.qZA()())}function U(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.serial),e.xp6(2),e.Oqu(t.packing),e.xp6(2),e.Oqu(t.time)}}function R(i,o){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Model"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Soni"),e.qZA()())}function O(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.count)}}function Q(i,o){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function D(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function F(i,o){if(1&i&&e.YNc(0,D,7,3,"ng-template",32),2&i){const n=o.rowIndex;e.Q6J("ngIf",o.$implicit.quantity&&n%2!=0)}}function Y(i,o){1&i&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Code"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Quantity"),e.qZA()())}function L(i,o){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.quantity)}}function j(i,o){if(1&i&&e.YNc(0,L,7,3,"ng-template",32),2&i){const n=o.rowIndex;e.Q6J("ngIf",o.$implicit.quantity&&n%2==0)}}const $=[{path:"",component:(()=>{class i{constructor(t,n){this.api=t,this.renderer=n,this.currentTime=new Date,this.currentYear=this.currentTime.getFullYear(),this.currentMonth=this.currentTime.getMonth()+1,this.currentDay=this.currentTime.getDate(),this.printers=[{name:"All",id:0},{name:"Printer 1",id:1},{name:"Printer 2",id:2},{name:"Printer 3",id:3},{name:"Printer 4",id:4}],this.retry=!1,this.time=new Date,this.line=13,this.serial="",this.accAss="",this.doorSerial="",this.someError=!1,this.errorText="",this.added=!1,this.addedText="Kiritildi"}ngAfterViewInit(){this.addKeyListener()}addKeyListener(){this.firstInput.nativeElement.addEventListener("keydown",t=>{("Tab"===t.key||"Enter"===t.key||"Alt"===t.key)&&(t.preventDefault(),this.renderer.selectRootElement("#packing").focus(),this.secondInput.nativeElement.focus())}),this.secondInput.nativeElement.addEventListener("keydown",t=>{("Tab"===t.key||"Enter"===t.key||"Alt"===t.key)&&(t.preventDefault(),this.renderer.selectRootElement("#serial").focus(),this.thirdInput.nativeElement.focus())}),this.thirdInput.nativeElement.addEventListener("keydown",t=>{("Tab"===t.key||"Enter"===t.key||"Alt"===t.key)&&(t.preventDefault(),this.change())})}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.intervalId=setInterval(()=>{t.time=new Date},1e3);let n={line:t.line};t.selectedPrinter=t.printers[0],t.lastProduct=yield t.api.getPackingLast(n),t.count=yield t.api.getPackingToday(n),t.byModel=yield t.api.getPackingTodayByModels(n),t.rest=yield t.api.getSectorBalance(n)})()}submit(){var t=this;return(0,u.Z)(function*(){console.log(t.selectedPrinter);let n={serial:t.sendSerial,packing:t.sendPacking,retry:t.retry,ref_code:t.doorSerial,id:t.selectedPrinter.id};if(t.retry=!1,console.log("data: ",n),""==t.sendSerial||""==t.sendPacking)return t.someError=!0,t.errorText="Serial toliq kiritilmadi11",void t.clear();if(t.sendPacking==t.sendSerial)return t.someError=!0,t.errorText="Bir xil serial kiritildi",t.accAss="",void t.renderer.selectRootElement("#door").focus();let a=yield t.api.sendSerialPacking(n);if("ok"!=a.result)return t.someError=!0,t.added=!1,t.errorText=`${a.error}`,t.clear(),t.renderer.selectRootElement("#door").focus(),void(t.image_name=t.sendSerial+".jpg");t.someError=!1,t.errorText="";let r={line:t.line};t.lastProduct=yield t.api.getPackingLast(r),t.count=yield t.api.getPackingToday(r),t.byModel=yield t.api.getPackingTodayByModels(r),t.rest=yield t.api.getSectorBalance(r),t.clear(),t.image_name=t.sendSerial+".jpg",t.renderer.selectRootElement("#door").focus(),t.added=!0,setTimeout(()=>{t.added=!1},3e3)})()}clear(){this.serial="",this.accAss="",this.doorSerial="",this.renderer.selectRootElement("#door").focus()}change(){var t=this;return(0,u.Z)(function*(){t.serial.includes("clear")&&t.clear(),t.serial.includes("refresh")&&location.reload(),t.sendPacking=t.accAss,t.serial.length>=15&&(t.sendSerial=t.serial,t.serial="",t.accAss="",yield t.submit())})()}changeAcc(){var t=this;return(0,u.Z)(function*(){t.accAss.includes("clear")&&t.clear(),t.accAss.includes("refresh")&&location.reload(),t.accAss.length>=12&&(t.sendPacking=t.accAss,t.renderer.selectRootElement("#serial").focus())})()}exportExcel(){var t=this;return(0,u.Z)(function*(){t.packingToday=yield t.api.getPackingTodaySerial(),l.e(574).then(l.bind(l,574)).then(n=>{const r={Sheets:{data:n.utils.json_to_sheet(t.packingToday)},SheetNames:["data"]},s=n.write(r,{bookType:"xlsx",type:"array"});t.saveAsExcelFile(s,"packing")})})()}saveAsExcelFile(t,n){let a=(new Date).getFullYear(),r=(new Date).getMonth(),s=(new Date).getDay(),p=(new Date).getHours(),z=(new Date).getMinutes();const W=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});C.saveAs(W,n+`_export_${a}_${r}_${s}-${p}_${z}.xlsx`)}getImage(t){return"/media/"+(new Date).getFullYear()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getDate()+"/"+t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.g),e.Y36(e.Qsj))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-packing"]],viewQuery:function(t,n){if(1&t&&(e.Gf(B,5),e.Gf(w,5),e.Gf(N,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.firstInput=a.first),e.iGM(a=e.CRH())&&(n.secondInput=a.first),e.iGM(a=e.CRH())&&(n.thirdInput=a.first)}},decls:61,vars:20,consts:[[1,"card",2,"padding-left","10px","padding-right","10px"],[1,"flex","flex-wrap","align-items-center","justify-content-left","card-container","blue-container"],[1,"left-0"],[1,"flex","flex-wrap","absolute","top-0","right-0","align-items-center","justify-content-right"],[2,"padding-right","20px"],[1,"grid"],[1,"col"],["type","text","id","door","placeholder","Eshik serial","autofocus","","pInputText","",3,"ngModel","ngModelChange"],["doorInput",""],["type","text","id","packing","placeholder","ACC.ASSY Number","pInputText","",3,"ngModel","ngModelChange"],["packingInput",""],[2,"display","flex","flex-direction","row","align-self","center"],["type","text","id","serial","placeholder","Serial Number","autofocus","","pInputText","",3,"ngModel","keyup","ngModelChange"],["serialInput",""],["pButton","","type","button","label","OK",2,"margin-left","5px",3,"click"],["pButton","","type","button","label","Clear",2,"margin-left","5px",3,"click"],["class","field-checkbox","style","align-items: center; display: flex; margin-left: 10px;",4,"ngFor","ngForOf"],[2,"color","red",3,"hidden"],[2,"color","green",3,"hidden"],[1,"flex","left-0","align-content-center","align-items-center","align-self-center"],["ariaLabel","Qayta Chiqarih",3,"ngModel","ngModelChange"],[2,"padding-top","10px"],["responsiveLayout","scroll",3,"value"],["pTemplate","header"],["pTemplate","body"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","XLS","tooltipPosition","bottom",1,"p-button-success","mr-2",3,"click"],["alt","Image","width","500",3,"src"],[1,"card"],["styleClass","p-datatable-sm",3,"value"],[1,"field-checkbox",2,"align-items","center","display","flex","margin-left","10px"],["name","category",3,"inputId","value","ngModel","ngModelChange"],[2,"margin-right","10px",3,"for"],[3,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"Qadoqlash liniyasi"),e.qZA()(),e.TgZ(4,"div",3)(5,"h1",4),e._uU(6),e.ALo(7,"date"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"input",7,8),e.NdJ("ngModelChange",function(r){return n.doorSerial=r}),e.qZA()(),e.TgZ(12,"div",6)(13,"input",9,10),e.NdJ("ngModelChange",function(r){return n.accAss=r}),e.qZA()(),e.TgZ(15,"div",6)(16,"div",11)(17,"input",12,13),e.NdJ("keyup",function(){return n.change()})("ngModelChange",function(r){return n.serial=r}),e.qZA(),e.TgZ(19,"div")(20,"button",14),e.NdJ("click",function(){return n.submit()}),e.qZA()(),e.TgZ(21,"div")(22,"button",15),e.NdJ("click",function(){return n.clear()}),e.qZA()(),e.YNc(23,S,4,5,"div",16),e.qZA()(),e.TgZ(24,"div",6)(25,"p",17),e._uU(26),e.qZA(),e.TgZ(27,"p",18),e._uU(28),e.qZA()()(),e.TgZ(29,"div",5)(30,"div",19)(31,"p-inputSwitch",20),e.NdJ("ngModelChange",function(r){return n.retry=r}),e.qZA()(),e.TgZ(32,"div",19)(33,"h2"),e._uU(34,"Qayta Chiqarish"),e.qZA()()()(),e.TgZ(35,"div",21)(36,"p-table",22),e.YNc(37,J,7,0,"ng-template",23),e.YNc(38,U,7,3,"ng-template",24),e.qZA()(),e.TgZ(39,"div",5)(40,"div",6)(41,"h2"),e._uU(42),e.TgZ(43,"button",25),e.NdJ("click",function(){return n.exportExcel()}),e.qZA()(),e.TgZ(44,"p-table",22),e.YNc(45,R,5,0,"ng-template",23),e.YNc(46,O,5,2,"ng-template",24),e.qZA()(),e.TgZ(47,"div",6),e._UZ(48,"p-image",26),e.qZA()(),e.TgZ(49,"h2"),e._uU(50,"Mavjud detallar ro'yhati "),e.qZA(),e.TgZ(51,"div",27)(52,"div",5)(53,"div",6)(54,"p-table",28),e.YNc(55,Q,7,0,"ng-template",23),e.YNc(56,F,1,1,"ng-template",24),e.qZA()(),e.TgZ(57,"div",6)(58,"p-table",28),e.YNc(59,Y,7,0,"ng-template",23),e.YNc(60,j,1,1,"ng-template",24),e.qZA()()()()),2&t&&(e.xp6(6),e.Oqu(e.xi3(7,17,n.time,"HH:mm:ss")),e.xp6(4),e.Q6J("ngModel",n.doorSerial),e.xp6(3),e.Q6J("ngModel",n.accAss),e.xp6(4),e.Q6J("ngModel",n.serial),e.xp6(6),e.Q6J("ngForOf",n.printers),e.xp6(2),e.Q6J("hidden",!n.someError),e.xp6(1),e.Oqu(n.errorText),e.xp6(1),e.Q6J("hidden",!n.added),e.xp6(1),e.Oqu(n.addedText),e.xp6(3),e.Q6J("ngModel",n.retry),e.xp6(5),e.Q6J("value",n.lastProduct),e.xp6(6),e.AsE("Bugun ishlab chiqarilgan maxsulot soni: ",null==n.count?null:n.count.smena1,"/",null==n.count?null:n.count.smena2," "),e.xp6(2),e.Q6J("value",n.byModel),e.xp6(4),e.s9C("src",n.getImage(n.image_name)),e.xp6(6),e.Q6J("value",n.rest),e.xp6(4),e.Q6J("value",n.rest))},directives:[c.Fj,h.o,c.JJ,c.On,f.Hq,d.sg,_,y.Ql,k.iA,I.jx,T.E,d.O5],pipes:[d.uU],styles:[""]}),i})()}];let G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.Bz.forChild($)],m.Bz]}),i})();var H=l(4534);let V=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,G,h.j,c.u5,H.V,k.U$,f.hJ,y.Iu,T.$,q]]}),i})()}}]);